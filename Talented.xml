<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">

<Script file="Talented.lua" />

<Frame name="TalentedPopup" parent="UIParent" hidden="true">
    <!--UIPanelDialogTemplate!-->
    <!--GlowBoxTemplate!-->
    <!--BasicFrameTemplate!-->
    <!--HelpPlateBox!-->

    <Size x="300" y="150" />
    <Anchors>
        <Anchor point="CENTER" />
    </Anchors>

    <Layers>
        <Layer level="BACKGROUND">
            <Texture>
                <Color r="0" g="0" b="0" a="0.9" />
            </Texture>
        </Layer>
        <Layer level="BORDER">
            <EdgeSize val="16" />

        </Layer>
        <Layer level="OVERLAY">
            <FontString name="$parent_Title" parentKey="title" inherits="ChatFontNormal" text="Talented">
                <Anchors>
                    <Anchor point="TOP">
                        <Offset x="0" y="-18" />
                    </Anchor>
                </Anchors>
            </FontString>
        </Layer>
    </Layers>

    <Scripts>
        <Onload>
        </Onload>
    </Scripts>

    <Frames>

<!-- EDIT BOX !-->
        <EditBox name="$parentInput" letters="25" autoFocus="false">
            <Size x="260" y="20" />
            <Anchors>
                <Anchor point="CENTER" />
            </Anchors>

            <Layers>
                <Layer level="BACKGROUND">
                    <Texture>
                        <Color r="0.1" g="0.1" b="0.1" a="1.0" />
                    </Texture>
                </Layer>
            </Layers>
            <FontString inherits="ChatFontNormal"/>

            <Scripts>
                <OnEscapePressed>
                    HideParentPanel(self)
                </OnEscapePressed>
                <OnEnterPressed>
                    self:ClearFocus()
                </OnEnterPressed>
                <OnShow>
                    self:SetText("New build name...")
                    self:HighlightText()
                    self:SetFocus()
                </OnShow>
                <OnHide>
                    self:SetText("")
                </OnHide>
            </Scripts>
        </EditBox>



<!-- BUTTON !-->
        <Button name="$parentButton" text="Save Build">
            <!--UIPanelButtonTemplate !-->

            <ButtonText>
                <Anchors>
                    <Anchor point="CENTER" />
                </Anchors>
            </ButtonText>

            <NormalFont style="ChatFontNormal" />
            <NormalTexture name="$parentBG">
                <Color r="0.4" g="0.4" b="0.4" a="0.4" />
            </NormalTexture>

            <Layers>
                <Layer level="BACKGROUND">
                    <Texture>
                        <Color r="0.2" g="0.2" b="0.2" a="0.8" />
                    </Texture>
                </Layer>
            </Layers>
            <Size x="234" y="21" />
            <Anchors>
                <Anchor point="BOTTOM">
                    <Offset y="15" />
                </Anchor>
            </Anchors>
            <Scripts>
                <OnLoad>
                    self.mode_key = nil
                    self.build_code = nil
                </OnLoad>
                <OnClick>
                    TalentedSaveActiveBuild(self.build_code,self.mode_key,TalentedPopupInput:GetText())
                    HideParentPanel(self);
                </OnClick>
            </Scripts>
        </Button>
    </Frames>

</Frame>


<!-- SAVED BUILDS DROPDOWN BOX !-->
 <Frame name="TalentedSavedBuildsDropdownTemplate" inherits="UIDropDownMenuTemplate" virtual="true" hidden="true">
     <Anchors>
        <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT">
            <Offset x="-110" y="0" />
        </Anchor>
     </Anchors>
 </Frame>


<Button name="TalentedSavedBuildsDropdownPvE" inherits="UIDropDownMenuTemplate" parent="PlayerTalentFrameTalents"> --Should inherit TalentedSavedBuildsDropdownTemplate but that functionality isn't well-understood enough yet
    <Anchors>
        <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT">
            <Offset x="-110" y="0" />
        </Anchor>
    </Anchors>

    <Scripts>
        <OnLoad>
            UIDropDownMenu_Initialize(self,TalentedInitDropdownPvE);
            self.TimeSinceLastUpdate = 0;
        </OnLoad>
        <OnUpdate>
            TalentedUpdateButtonText_OnUpdate(self,elapsed,"PvE")
        </OnUpdate>
    </Scripts>
</Button>

<Button name="TalentedSavedBuildsDropdownPvP" inherits="UIDropDownMenuTemplate" parent="PlayerTalentFramePVPTalents" hidden="true">
    <Anchors>
        <Anchor point="BOTTOMRIGHT">
            <Offset x="-108" y="-29" />
        </Anchor>
    </Anchors>

    <Scripts>
        <OnLoad>
            UIDropDownMenu_Initialize(self,TalentedInitDropdownPvP)
            self.TimeSinceLastUpdate = 0;
        </OnLoad>
        <OnUpdate>
            TalentedUpdateButtonText_OnUpdate(self,elapsed,"PvP")
        </OnUpdate>

    </Scripts>
</Button>





    <!-- PlayerTalentFrameTalents !-->
    <!-- PlayerTalentFramePVPTalents!-->

</Ui>